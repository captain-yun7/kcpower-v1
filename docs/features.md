# 프로젝트 기능 명세서

## 1. 프로젝트 개요

### 프로젝트명
Private LMS (개인 온라인 강의 사이트)

### 목적
개인 강사의 온라인 강의 판매 및 수강 관리를 위한 LMS(Learning Management System) 플랫폼

### 참고 사이트
- 하우위 잉글리시: https://www.howweenglish.com/main/main
- 참고 사이트의 구조를 기반으로 디자인을 변경하여 개발

### 주요 특징
- 개인 강사 중심의 온라인 강의 플랫폼
- 학생(일반 사용자)과 관리자(강사) 2개의 사용자 그룹
- 강의별 개별 구매 방식
- Vimeo 기반 동영상 스트리밍
- 토스페이먼츠 결제 연동

---

## 2. 참고 사이트 분석

### 하우위 잉글리시 메뉴 구조

#### 소개 (브랜드)
- 사이트 소개
- 강사(Eric쌤) 소개

#### 수강신청
- 강의 목록 및 구매

#### 커뮤니티
- 공지사항
- 수강후기 (본 프로젝트에서는 제외)

#### 고객센터
- 1:1 문의

#### 마이페이지
- 내 강의실
- 내 정보
- 등록기기 관리
- 결제 내역

### 본 프로젝트 적용 방향
- 참고 사이트의 메뉴 구조를 기반으로 함
- 강의 과정 구분(기초/정규/패키지) 제거 → 단순 강의 목록
- 수강후기 제외
- 카테고리/태그/필터 기능 제외
- 관리자 페이지 추가

---

## 3. 기술 스택

### Frontend
- **Framework**: Next.js 15 (App Router)
- **Language**: TypeScript
- **Styling**: TailwindCSS
- **UI Components**: Shadcn/ui (또는 커스텀)
- **Rich Text Editor**: Tiptap
- **Form Handling**: React Hook Form + Zod
- **State Management**: React Context / Zustand (필요시)

### Backend
- **API**: Next.js API Routes (App Router)
- **Database**: PostgreSQL (Supabase)
- **ORM**: Prisma
- **Authentication**: NextAuth.js v5 (Auth.js)
  - Providers: Credentials (일반 로그인), Google, Kakao, Naver
- **File Storage**: Supabase Storage
- **Video Streaming**: Vimeo API (Vimeo Starter Plan)
- **Payment Gateway**: 토스페이먼츠 (Toss Payments)

### DevOps
- **Hosting**: Vercel
- **Database**: Supabase (PostgreSQL)
- **Storage**: Supabase Storage
- **Version Control**: Git/GitHub
- **CI/CD**: Vercel Auto Deploy

---

## 4. 기능 명세

### A. 사용자 인증 및 관리

#### A-1. 회원가입 / 로그인
**4가지 로그인 방식 지원**

1. **일반 회원가입 / 로그인 (Credentials)**
   - 이메일 / 비밀번호 기반
   - 이메일 중복 검사
   - 비밀번호 암호화 저장
   - 이메일 인증 (선택적)

2. **Google 소셜 로그인**
   - NextAuth.js Google Provider
   - OAuth 2.0 인증

3. **Kakao 소셜 로그인**
   - NextAuth.js Kakao Provider
   - Kakao API 연동

4. **Naver 소셜 로그인**
   - NextAuth.js Naver Provider
   - Naver API 연동

**공통 기능**
- 로그인 성공 시 세션 생성
- JWT 토큰 기반 인증
- 자동 로그인 (Remember Me)
- 로그아웃

#### A-2. 프로필 관리
- 프로필 조회
- 프로필 수정
  - 이름
  - 이메일 (소셜 로그인 사용자는 수정 불가)
  - 전화번호
  - 프로필 이미지 업로드
- 소셜 로그인 사용자: 제공자 정보 표시

#### A-3. 비밀번호 관리
- 비밀번호 변경 (일반 회원가입 사용자만)
- 비밀번호 찾기
  - 이메일 인증 후 재설정 링크 발송
  - 임시 비밀번호 발급 (선택적)

#### A-4. 회원 탈퇴
- 탈퇴 확인 절차
- 수강 중인 강의가 있을 경우 경고
- 탈퇴 시 개인정보 삭제 (또는 비식별화)
- 구매/결제 내역은 법적 보관 기간 동안 보관

---

### B. 강의 시스템

#### B-1. 강의 목록 페이지

**레이아웃**
- 그리드 형태의 강의 카드 리스트
- 반응형 디자인 (모바일/태블릿/데스크톱)

**강의 카드 정보**
- 강의 썸네일 이미지
- 강의 제목
- 강의 가격
- 간단한 설명 (1-2줄)
- 미리보기 영상 여부 아이콘

**기능**
- 검색 기능
  - 강의 제목 검색
  - 강의 설명 검색
- 정렬 기능 (선택적)
  - 최신순
  - 가격 낮은순/높은순
  - 인기순 (구매 수)

**제외 기능**
- ❌ 카테고리 필터
- ❌ 태그 필터
- ❌ 난이도 필터
- ❌ 강의 평점/리뷰

#### B-2. 강의 상세 페이지

**강의 정보 섹션**
- 강의 제목
- 강의 썸네일 이미지
- 강의 상세 설명 (Rich Text)
- 강의 가격
- 총 영상 개수
- 총 재생 시간
- 강사 정보
  - 강사 이름
  - 강사 소개

**포함된 영상 목록**
- 영상 제목
- 재생 시간
- 미리보기 가능 여부 표시
- 순서 번호

**미리보기 영상 재생**
- 미리보기로 지정된 영상은 구매 전에도 재생 가능
- Vimeo 플레이어 임베드
- 재생 제어 (재생/일시정지, 볼륨, 전체화면)

**강의 자료 섹션**
- 강의 자료 파일 목록 (파일명, 크기)
- 구매 전: 파일 목록만 표시
- 구매 후: 다운로드 버튼 활성화

**구매 버튼**
- 미구매 상태: "구매하기" 버튼 → 결제 페이지로 이동
- 이미 구매한 경우: "수강하기" 버튼 → 강의 수강 페이지로 이동
- 로그인하지 않은 경우: 로그인 페이지로 이동

**관련 정보**
- 환불 정책 안내
- 수강 기간 안내 (무제한 또는 기간 제한)
- 등록기기 제한 안내

#### B-3. 강의 수강 페이지 (구매자만 접근 가능)

**접근 제한**
- 구매한 학생만 접근 가능
- 미구매자 접근 시 강의 상세 페이지로 리디렉션
- 등록기기 확인 (최대 2개 제한)

**레이아웃**
- 왼쪽/상단: Vimeo 영상 플레이어 (메인)
- 오른쪽/하단: 영상 목록 (사이드바)

**Vimeo 영상 플레이어**
- Vimeo Player SDK 사용
- 반응형 플레이어
- 재생 제어
  - 재생/일시정지
  - 볼륨 조절
  - 재생 속도 조절
  - 전체화면
  - 화질 선택
- 영상 다운로드 방지 (Vimeo 설정)
- 영상 우클릭 방지

**현재 영상 정보**
- 현재 재생 중인 영상 제목
- 영상 설명
- 진도율 표시 (해당 영상)

**영상 목록 (사이드바)**
- 전체 영상 목록 (순서대로)
- 각 영상별 정보
  - 순서 번호
  - 제목
  - 재생 시간
  - 시청 완료 체크 아이콘
- 현재 재생 중인 영상 하이라이트
- 영상 클릭 시 해당 영상으로 전환

**진도율 표시**
- 전체 진도율 (%) - 진행 바
- 완료한 영상 수 / 전체 영상 수
- 예: "5 / 10 완료 (50%)"

**내비게이션**
- 이전 영상 버튼
- 다음 영상 버튼
- 강의 목록으로 돌아가기

**강의 자료 다운로드 섹션**
- 강의 자료 파일 목록
- 다운로드 버튼
- 파일명, 파일 크기 표시

**이어보기 기능**
- 마지막 시청 위치 자동 저장
- 다시 접속 시 이어보기 여부 확인

#### B-4. 진도율 시스템

**영상 시청 추적**
- Vimeo Player API를 활용한 재생 시간 추적
- 주기적으로 현재 재생 위치 저장 (예: 10초마다)
- 마지막 시청 위치 저장

**완료 처리 로직**
- 영상의 80% 이상 시청 시 해당 영상 "완료" 처리
- 완료된 영상에 체크 아이콘 표시
- 완료 여부는 영상별로 관리

**전체 진도율 계산**
- 전체 진도율 = (완료한 영상 수 / 전체 영상 수) × 100
- 실시간 업데이트
- 마이페이지 "내 강의실"에도 표시

**이어보기**
- 각 영상별 마지막 시청 위치 저장
- 영상 재생 시 "이어보기" 또는 "처음부터" 선택 가능
- 완료된 영상도 다시 볼 수 있음

---

### C. 결제 시스템

#### C-1. 결제 페이지

**결제 정보 요약**
- 강의 썸네일
- 강의 제목
- 강의 가격
- 결제 금액 (현재는 할인 없음, 추후 확장 가능)

**결제 수단 선택**
1. **카드 결제 (토스페이먼츠)**
   - 신용카드 / 체크카드
   - 간편결제 (토스페이, 네이버페이, 카카오페이 등 - 토스페이먼츠 지원)

2. **무통장입금**
   - 입금 계좌 정보 표시
   - 입금자명 입력
   - 입금 예정일 입력

**구매자 정보**
- 이름 (자동 입력, 수정 가능)
- 이메일 (자동 입력, 수정 불가)
- 전화번호 (자동 입력, 수정 가능)

**구매 동의 체크박스**
- 환불 정책 동의
- 개인정보 제공 동의 (결제 처리 목적)
- 전자금융거래 이용약관 동의

**결제 버튼**
- "결제하기" 버튼 (카드 결제)
- "입금 정보 제출" 버튼(무통장입금)

#### C-2. 결제 처리

**C-2-1. 카드 결제 (토스페이먼츠)**

**결제 플로우**
1. 사용자가 "결제하기" 버튼 클릭
2. 토스페이먼츠 결제창 호출
3. 사용자가 결제 진행
4. 결제 성공 시:
   - 결제 승인 요청 (서버 → 토스페이먼츠 API)
   - 결제 정보 DB 저장 (Payment 테이블)
   - 구매 정보 DB 저장 (Purchase 테이블)
   - 수강 등록 (Enrollment 테이블)
   - 결제 완료 페이지로 이동
5. 결제 실패 시:
   - 실패 사유 표시
   - 결제 페이지로 복귀

**결제 정보 저장**
- 결제 키 (paymentKey)
- 주문 번호 (orderId)
- 결제 금액
- 결제 수단
- 결제 상태 (완료/실패/취소)
- 결제 일시

**수강 즉시 가능**
- 결제 성공 시 즉시 강의 수강 가능
- "내 강의실"에 자동 추가

**C-2-2. 무통장입금**

**입금 대기 플로우**
1. 사용자가 입금자명, 입금 예정일 입력
2. "입금 정보 제출" 버튼 클릭
3. 주문 생성 (Purchase 테이블)
4. 결제 정보 저장 (Payment 테이블)
   - 결제 상태: "입금 대기"
   - 입금자명
   - 입금 예정일
5. 입금 대기 안내 페이지 표시
   - 입금 계좌 정보
   - 입금자명 확인
   - 입금 금액
   - 관리자 확인 후 수강 가능 안내

**관리자 승인 프로세스**
1. 관리자 페이지에서 "입금 대기" 목록 조회
2. 실제 입금 확인
3. 승인 또는 거절
   - **승인**: 결제 상태 "완료"로 변경 → 수강 등록 → 사용자에게 알림 (이메일/알림)
   - **거절**: 거절 사유 입력 → 사용자에게 알림

**입금 확인 알림**
- 이메일 발송 (선택적)
- 사이트 내 알림

#### C-3. 영수증 / 세금계산서

**C-3-1. 영수증**

**발급**
- 결제 완료 시 자동 발급
- 영수증 번호 자동 생성

**영수증 정보**
- 영수증 번호
- 발급일
- 구매자 정보 (이름, 이메일)
- 강의명
- 결제 금액
- 결제 수단
- 결제일

**조회 및 출력**
- 마이페이지 > 결제 내역에서 조회
- PDF 다운로드 / 인쇄
- 재발급 가능

**C-3-2. 세금계산서**

**발급 조건**
- 사업자만 발급 가능
- 결제 완료 후 발급 요청

**발급 요청 플로우**
1. 마이페이지 > 결제 내역에서 "세금계산서 발급 요청"
2. 사업자 정보 입력
   - 사업자등록번호
   - 상호명
   - 대표자명
   - 사업장 주소
   - 업태/종목
   - 이메일 (세금계산서 발송)
3. 요청 제출
4. 관리자 확인 및 승인
5. 승인 후 세금계산서 발행
6. 이메일로 발송 (또는 다운로드 가능)

**관리자 발급 프로세스**
- 세금계산서 발급 요청 목록 조회
- 사업자 정보 확인
- 세금계산서 발행 (수동 또는 API 연동)
- 발행 완료 처리

#### C-4. 환불 처리

**환불 정책 (예시 - 실제 정책은 사이트 운영자가 결정)**
- 수강 시작 전: 100% 환불
- 수강 시작 후 7일 이내: 50% 환불
- 수강 시작 후 7일 이후: 환불 불가
- 진도율 20% 이상: 환불 불가

**환불 신청 (사용자)**
1. 마이페이지 > 결제 내역에서 "환불 신청"
2. 환불 사유 입력
3. 환불 계좌 정보 입력 (무통장입금의 경우)
4. 신청 제출

**환불 승인/거절 (관리자)**
1. 관리자 페이지에서 환불 신청 목록 조회
2. 환불 정책에 따라 검토
3. 승인 또는 거절
   - **승인**:
     - 카드 결제: 토스페이먼츠 API로 결제 취소
     - 무통장입금: 수동 환불 처리 (계좌 이체)
     - 수강 취소 (Enrollment 삭제 또는 상태 변경)
     - 사용자에게 환불 완료 알림
   - **거절**: 거절 사유 입력 → 사용자에게 알림

**환불 정보 저장**
- 환불 요청일
- 환불 사유
- 환불 상태 (대기/승인/거절/완료)
- 환불 금액
- 환불 완료일

---

### D. 등록기기 관리

#### D-1. 기기 등록

**자동 등록**
- 사용자가 강의 수강 페이지 접속 시 자동으로 기기 정보 수집 및 등록
- 최대 2개 기기까지 등록 가능

**기기 정보 수집**
- User Agent (브라우저, OS 정보)
- IP 주소
- 기기 고유 식별자 (Fingerprinting 라이브러리 사용 - 예: FingerprintJS)
- 등록일시

**기기 식별**
- 브라우저 Fingerprinting을 통해 기기 고유 ID 생성
- 쿠키 및 로컬 스토리지 활용

**초과 시 처리**
- 3번째 기기에서 접속 시도 시:
  - "등록 가능한 기기 수를 초과했습니다" 안내 메시지
  - 기존 기기 목록 표시
  - "기기를 해제하고 새 기기를 등록하시겠습니까?" 선택 옵션
  - 또는 마이페이지로 이동하여 기기 관리 안내

#### D-2. 기기 관리 (마이페이지)

**기기 목록 조회**
- 등록된 기기 목록 표시
  - 기기명 (예: "Chrome on Windows", "Safari on iPhone")
  - 등록일
  - 마지막 접속일
  - IP 주소 (선택적)

**기기 해제 (사용자)**
- 각 기기별 "해제" 버튼
- 해제 확인 절차
- 해제 후 재등록 가능

**기기 해제 시 효과**
- 해당 기기에서 수강 페이지 접근 차단
- 로그인은 가능하나 강의 수강 시 재등록 필요

#### D-3. 관리자 기능

**사용자별 등록기기 조회**
- 관리자 페이지에서 특정 사용자의 등록 기기 조회
- 기기 상세 정보 확인

**관리자 강제 해제**
- 관리자가 특정 사용자의 기기 강제 해제 가능
- 부정 사용 의심 시 조치

---

### E. 커뮤니티

#### E-1. 공지사항

**공지사항 목록 페이지**
- 공지사항 리스트 (테이블 또는 카드 형태)
- 각 공지사항 정보
  - 제목
  - 작성일
  - 조회수
  - 중요 공지 여부 (아이콘 또는 배지)
- 페이지네이션 또는 무한 스크롤

**중요 공지**
- 중요 공지로 지정된 게시글은 목록 상단 고정
- 별도 스타일 적용 (배경색, 아이콘 등)

**공지사항 상세 페이지**
- 제목
- 작성일
- 조회수
- 내용 (Rich Text 렌더링)
- 첨부파일 (있을 경우)
  - 파일명
  - 다운로드 버튼

**첨부파일**
- 이미지, PDF, ZIP 등 다양한 파일 형식 지원
- Supabase Storage에 저장
- 다운로드 가능

**관리자 기능**
- 공지사항 작성
  - 제목 입력
  - 내용 입력 (Rich Text 에디터 - 선택적, 또는 Markdown)
  - 첨부파일 업로드
  - 중요 공지 체크박스
- 공지사항 수정
- 공지사항 삭제
- 임시저장 (선택적)

**권한**
- 관리자만 작성/수정/삭제 가능
- 일반 사용자는 읽기 전용

---

### F. 고객센터

#### F-1. 1:1 문의

**F-1-1. 문의 작성 (사용자)**

**작성 폼**
- 제목 입력
- 내용 입력 (Tiptap 리치 텍스트 에디터)
  - 텍스트 서식 (볼드, 이탤릭, 밑줄, 취소선)
  - 리스트 (순서 있음/없음)
  - 링크 삽입
  - 이미지 업로드 및 삽입
  - 코드 블록 (선택적)
- 비밀글 옵션 체크박스
  - 체크 시: 작성자와 관리자만 조회 가능
  - 미체크 시: 모든 사용자 조회 가능 (선택적 - 사이트 정책에 따라)

**이미지 업로드**
- Tiptap 에디터 내 이미지 업로드 버튼
- 이미지 파일 선택 (jpg, png, gif 등)
- Supabase Storage에 업로드
- 에디터 내 이미지 자동 삽입

**제출**
- "문의 등록" 버튼 클릭
- 유효성 검사 (제목, 내용 필수)
- DB에 저장 (Inquiry 테이블)
- 문의 목록 페이지로 이동

**F-1-2. 문의 목록 (사용자)**

**내 문의 목록**
- 본인이 작성한 문의만 조회
- 각 문의 정보
  - 제목
  - 작성일
  - 답변 상태 (대기/완료)
  - 비밀글 여부 아이콘

**필터링 (선택적)**
- 답변 상태별 필터 (전체/대기/완료)

**페이지네이션**
- 페이지당 10개 또는 20개

**F-1-3. 문의 상세 (사용자)**

**문의 내용**
- 제목
- 작성일
- 작성자 (본인)
- 내용 (Rich Text 렌더링)
- 첨부 이미지 표시

**관리자 답변**
- 답변 여부 표시
- 답변 내용 (Rich Text 렌더링)
- 답변 작성일

**수정/삭제**
- 답변 전: 수정/삭제 가능
- 답변 후: 수정/삭제 불가 (또는 관리자에게 요청)

**F-1-4. 문의 관리 (관리자)**

**전체 문의 목록**
- 모든 사용자의 문의 조회
- 각 문의 정보
  - 작성자명
  - 제목
  - 작성일
  - 답변 상태
  - 비밀글 여부

**필터링**
- 답변 상태별 필터
- 작성자 검색
- 날짜 범위 검색

**문의 상세**
- 작성자 정보
- 문의 내용
- 작성일

**답변 작성**
- Tiptap 리치 텍스트 에디터
- 이미지 업로드 가능
- 답변 등록 버튼
- 답변 등록 시:
  - 답변 저장 (InquiryReply 테이블)
  - 답변 상태 "완료"로 변경
  - 사용자에게 알림 (이메일/사이트 내 알림 - 선택적)

**답변 수정/삭제**
- 답변 수정 가능
- 답변 삭제 가능

---

### G. 마이페이지

#### G-1. 내 강의실

**수강 중인 강의 목록**
- 구매한 강의 목록 (카드 형태)
- 각 강의 정보
  - 강의 썸네일
  - 강의 제목
  - 진도율 (진행 바 + 퍼센트)
  - 완료한 영상 수 / 전체 영상 수
  - 마지막 학습일

**진도율 표시**
- 진행 바 (Progress Bar)
- 퍼센트 (예: 50%)
- 색상으로 구분 (예: 0-30% 빨강, 31-70% 노랑, 71-100% 초록)

**최근 학습 이력**
- 마지막으로 시청한 영상 제목
- 마지막 학습일시
- "이어서 학습하기" 버튼 → 해당 영상으로 바로 이동

**수강하기 버튼**
- 각 강의 카드에서 "수강하기" 버튼 클릭
- 강의 수강 페이지로 이동
- 마지막 시청 영상 또는 첫 번째 영상부터 시작

**필터링 (선택적)**
- 진행 중 / 완료한 강의 구분

#### G-2. 내 정보

**프로필 조회**
- 프로필 이미지
- 이름
- 이메일
- 전화번호
- 가입일
- 가입 방법 (일반/Google/Kakao/Naver)

**프로필 수정**
- 프로필 이미지 업로드
  - 이미지 파일 선택
  - 미리보기
  - Supabase Storage에 저장
  - 기본 이미지로 초기화
- 이름 수정
- 전화번호 수정
- 이메일 수정 (일반 회원가입 사용자만, 인증 필요)

**소셜 로그인 사용자**
- 제공자 정보 표시 (Google/Kakao/Naver)
- 이메일 수정 불가 안내
- 프로필 이미지는 소셜 계정 이미지 또는 직접 업로드

**비밀번호 변경 (일반 회원가입 사용자만)**
- 현재 비밀번호 입력
- 새 비밀번호 입력
- 새 비밀번호 확인
- 비밀번호 강도 체크
- 변경 완료

**회원 탈퇴**
- 탈퇴 버튼
- 탈퇴 확인 절차
  - "정말 탈퇴하시겠습니까?" 확인
  - 수강 중인 강의가 있을 경우 경고 메시지
  - 탈퇴 사유 입력 (선택적)
- 탈퇴 처리
  - 개인정보 삭제 또는 비식별화
  - 구매/결제 내역은 법적 보관 기간 동안 보관
  - 로그아웃 및 메인 페이지로 이동

#### G-3. 등록기기 관리

**등록된 기기 목록**
- 각 기기 정보
  - 기기명 (예: "Chrome on Windows")
  - 등록일
  - 마지막 접속일
  - IP 주소 (선택적)

**기기 해제**
- 각 기기별 "해제" 버튼
- 해제 확인 다이얼로그
- 해제 처리

**기기 추가 안내**
- "현재 N/2개 기기 등록됨" 표시
- 기기 등록은 강의 수강 시 자동 등록 안내

**현재 기기 표시**
- 현재 접속 중인 기기 하이라이트 또는 배지 표시

#### G-4. 결제 내역

**구매한 강의 목록**
- 각 구매 정보
  - 강의 썸네일
  - 강의 제목
  - 구매일
  - 결제 금액
  - 결제 수단 (카드/무통장입금)
  - 결제 상태 (완료/대기/취소/환불)

**결제 상태별 표시**
- **완료**: 초록색 배지
- **입금 대기**: 노란색 배지
- **취소**: 회색 배지
- **환불**: 빨간색 배지

**각 항목별 기능**
- **영수증 조회/출력**: "영수증 보기" 버튼 → PDF 다운로드 또는 인쇄
- **세금계산서**:
  - 발급 전: "세금계산서 발급 요청" 버튼
  - 발급 후: "세금계산서 다운로드" 버튼
- **환불 신청**:
  - 환불 가능한 경우: "환불 신청" 버튼
  - 환불 불가: 사유 표시 (예: "환불 기간 만료")
  - 환불 신청 중: "환불 처리 중" 표시

**필터링**
- 결제 상태별 필터 (전체/완료/대기/취소/환불)
- 날짜 범위 검색

**페이지네이션**
- 페이지당 10개 또는 20개

---

### H. 관리자 페이지

**접근 권한**
- 관리자 역할(Role)을 가진 사용자만 접근 가능
- 일반 사용자 접근 시 403 Forbidden 또는 메인 페이지로 리디렉션

**레이아웃**
- 관리자 전용 사이드바 메뉴
- 대시보드 스타일 UI

#### H-1. 강의 관리

**H-1-1. 강의 목록**

**전체 강의 목록**
- 테이블 형태
- 각 강의 정보
  - 썸네일 (작은 이미지)
  - 강의 제목
  - 가격
  - 영상 개수
  - 공개/비공개 상태
  - 등록일
  - 수정일
  - 구매자 수

**필터링/정렬**
- 공개/비공개 필터
- 검색 (강의 제목)
- 정렬 (등록일, 수정일, 구매자 수)

**액션 버튼**
- "강의 추가" 버튼 → 강의 생성 페이지
- 각 강의별 "수정", "삭제" 버튼

**H-1-2. 강의 생성/수정**

**기본 정보**
- 강의 제목 입력
- 강의 설명 입력 (Rich Text 에디터 - 선택적, 또는 Textarea)
- 강의 가격 입력 (숫자)
- 강의 썸네일 이미지 업로드
  - 이미지 파일 선택
  - 미리보기
  - Supabase Storage에 저장
- 강사 정보 입력
  - 강사 이름 (기본값: 관리자 이름)
  - 강사 소개

**공개 설정**
- 공개/비공개 토글
- 비공개 시: 강의 목록에 표시되지 않음 (관리자는 조회 가능)

**저장**
- "저장" 버튼 → 강의 정보 DB 저장
- 생성 후 → 영상 관리 페이지로 이동 (또는 영상 추가 안내)

**H-1-3. 영상 관리**

**영상 목록**
- 해당 강의에 포함된 영상 목록
- 각 영상 정보
  - 순서 번호
  - 썸네일 (Vimeo)
  - 영상 제목
  - 재생 시간
  - Vimeo URL
  - 미리보기 여부

**영상 추가**
- "영상 추가" 버튼
- 입력 폼
  - Vimeo 영상 URL 입력
  - 영상 제목 입력
  - 영상 설명 입력 (선택적)
  - 미리보기 영상으로 지정 체크박스
- Vimeo API 연동
  - URL 유효성 검사
  - 영상 정보 가져오기 (제목, 재생 시간, 썸네일)
- 저장 → Video 테이블에 저장

**영상 순서 변경**
- 드래그 앤 드롭으로 순서 변경
- 또는 위/아래 화살표 버튼
- 순서 변경 후 "순서 저장" 버튼

**미리보기 영상 지정**
- 각 영상별 "미리보기 설정" 버튼 또는 체크박스
- 여러 개 지정 가능
- 미리보기 영상은 구매 전에도 재생 가능

**영상 수정**
- 영상 제목, 설명 수정
- Vimeo URL 변경 (주의 필요)

**영상 삭제**
- "삭제" 버튼
- 삭제 확인 절차
- 삭제 시 Video 테이블에서 제거 (또는 soft delete)
- 사용자 진도율 데이터 처리 고려

**H-1-4. 강의 자료 관리**

**강의 자료 목록**
- 해당 강의에 포함된 자료 파일 목록
- 각 파일 정보
  - 파일명
  - 파일 크기
  - 업로드일

**파일 업로드**
- "파일 업로드" 버튼
- 파일 선택 (PDF, ZIP, DOCX 등)
- Supabase Storage에 업로드
- CourseFile 테이블에 저장

**파일 삭제**
- "삭제" 버튼
- 삭제 확인
- Supabase Storage에서 파일 삭제
- DB 레코드 삭제

**파일명 수정**
- 파일명 직접 수정 (선택적)

**H-1-5. 강의 삭제**

**삭제 조건 확인**
- 구매자가 있는 강의 삭제 시 경고
- "정말 삭제하시겠습니까?" 확인

**삭제 처리**
- Soft delete 권장 (deleted_at 컬럼)
- 또는 Hard delete (관련 데이터 모두 삭제)
- 관련 데이터 처리
  - 영상 (Videos)
  - 강의 자료 (CourseFiles)
  - 구매 내역 (Purchases) - 유지 또는 상태 변경
  - 수강 내역 (Enrollments) - 유지 또는 상태 변경

#### H-2. 학생 관리

**H-2-1. 회원 목록**

**전체 회원 목록**
- 테이블 형태
- 각 회원 정보
  - 프로필 이미지 (작게)
  - 이름
  - 이메일
  - 가입일
  - 가입 방법 (일반/Google/Kakao/Naver)
  - 구매한 강의 수
  - 회원 상태 (정상/정지/탈퇴)

**검색/필터**
- 이름 또는 이메일 검색
- 가입 방법별 필터
- 회원 상태별 필터
- 날짜 범위 (가입일)

**정렬**
- 가입일순
- 이름순
- 구매 강의 수순

**페이지네이션**

**H-2-2. 회원 상세**

**회원 정보**
- 프로필 이미지
- 이름, 이메일, 전화번호
- 가입일, 가입 방법
- 회원 상태

**수강 현황**
- 구매한 강의 목록
- 각 강의별 진도율
- 마지막 학습일

**결제 내역**
- 전체 구매 내역
- 총 결제 금액

**등록기기 조회**
- 등록된 기기 목록
- 각 기기 정보

**관리자 액션**
- 회원 상태 변경 (정상/정지)
- 등록기기 해제
- 회원 삭제 (탈퇴 처리)

**H-2-3. 회원 상태 관리**

**회원 정지**
- 정지 사유 입력
- 정지 기간 설정 (선택적)
- 정지 시: 로그인 불가 또는 수강 불가

**회원 정지 해제**
- 정지 해제 버튼

**회원 삭제 (탈퇴 처리)**
- 삭제 확인
- 개인정보 삭제 또는 비식별화
- 구매/결제 내역 유지

#### H-3. 결제 관리

**H-3-1. 전체 결제 내역**

**결제 내역 목록**
- 테이블 형태
- 각 결제 정보
  - 주문번호
  - 학생명
  - 강의명
  - 결제 금액
  - 결제 수단 (카드/무통장입금)
  - 결제 상태 (완료/대기/취소/환불)
  - 결제일

**필터링**
- 결제 수단별 필터
- 결제 상태별 필터
- 날짜 범위 (결제일)
- 학생명 또는 강의명 검색

**정렬**
- 결제일순
- 금액순

**페이지네이션**

**통계 요약 (상단)**
- 총 결제 건수
- 총 결제 금액
- 기간별 매출 (오늘/이번 주/이번 달)

**H-3-2. 무통장입금 관리**

**입금 대기 목록**
- 결제 상태가 "입금 대기"인 항목만 표시
- 각 항목 정보
  - 주문번호
  - 학생명 (입금자명)
  - 강의명
  - 입금 금액
  - 입금 예정일
  - 신청일

**입금 확인**
- 실제 입금 여부 수동 확인 (은행 거래 내역 대조)
- 각 항목별 "승인" 또는 "거절" 버튼

**승인 처리**
- "승인" 버튼 클릭
- 확인 다이얼로그
- 승인 처리
  - 결제 상태 "완료"로 변경
  - 수강 등록 (Enrollment 생성)
  - 사용자에게 알림 (이메일/사이트 내 알림)
- 입금 대기 목록에서 제거

**거절 처리**
- "거절" 버튼 클릭
- 거절 사유 입력
- 거절 처리
  - 결제 상태 "거절"로 변경
  - 사용자에게 알림 (거절 사유 포함)

**H-3-3. 환불 관리**

**환불 신청 목록**
- 환불 신청된 항목 목록
- 각 항목 정보
  - 주문번호
  - 학생명
  - 강의명
  - 환불 금액
  - 환불 사유
  - 신청일
  - 환불 상태 (대기/승인/거절/완료)

**환불 검토**
- 환불 정책에 따라 환불 가능 여부 확인
- 수강 시작일, 진도율 등 확인

**환불 승인**
- "승인" 버튼 클릭
- 환불 처리 방법 선택
  - 카드 결제: 토스페이먼츠 API로 결제 취소 요청
  - 무통장입금: 환불 계좌 정보 확인 후 수동 이체
- 승인 처리
  - 환불 상태 "승인" 또는 "완료"로 변경
  - 수강 취소 (Enrollment 삭제 또는 상태 변경)
  - 사용자에게 알림

**환불 거절**
- "거절" 버튼 클릭
- 거절 사유 입력
- 거절 처리
  - 환불 상태 "거절"로 변경
  - 사용자에게 알림 (거절 사유 포함)

**환불 완료 내역**
- 환불 완료된 항목 조회
- 환불일, 환불 금액

**H-3-4. 영수증/세금계산서 관리**

**영수증 관리**
- 발행된 영수증 목록
- 재발행 기능 (사용자 요청 시)

**세금계산서 발행 요청 목록**
- 사용자가 요청한 세금계산서 목록
- 각 요청 정보
  - 주문번호
  - 학생명
  - 강의명
  - 사업자 정보
  - 요청일
  - 발행 상태 (대기/발행 완료)

**세금계산서 발행**
- "발행" 버튼 클릭
- 사업자 정보 확인
- 세금계산서 발행 처리
  - 수동 발행 (회계 프로그램 사용)
  - 또는 API 연동 (선택적 - 예: 더존, 세무서 API)
- 발행 완료 처리
  - 발행 상태 "완료"로 변경
  - 발행일 기록
  - 사용자에게 이메일 발송 또는 다운로드 링크 제공

**세금계산서 재발행**
- 오류 또는 분실 시 재발행

#### H-4. 콘텐츠 관리

**H-4-1. 공지사항 관리**

**공지사항 목록**
- 전체 공지사항 목록 (관리자용)
- 각 공지사항 정보
  - 제목
  - 작성일
  - 조회수
  - 중요 공지 여부

**공지사항 작성**
- "공지사항 작성" 버튼
- 작성 폼
  - 제목 입력
  - 내용 입력 (Rich Text 에디터 - 선택적)
  - 첨부파일 업로드
  - 중요 공지 체크박스
- 저장 → Notice 테이블에 저장

**공지사항 수정**
- 기존 공지사항 수정
- 수정일 기록

**공지사항 삭제**
- 삭제 확인
- 삭제 처리

**H-4-2. 1:1 문의 관리**

**전체 문의 목록**
- 앞서 F-1-4에서 설명한 내용과 동일
- 답변 대기 중인 문의 하이라이트

**답변 작성**
- Tiptap 리치 텍스트 에디터
- 이미지 업로드
- 답변 등록
- 답변 수정/삭제

**H-4-3. 소개 페이지 관리 (선택적)**

현재 요구사항에서는 소개 페이지가 정적이므로, 이 기능은 선택적입니다.

추후 CMS 기능 추가 시:
- 사이트 소개 내용 수정
- 강사 소개 내용 수정
- 이미지 업로드

#### H-5. 통계/리포트

**H-5-1. 대시보드**

**개요 카드**
- **총 회원 수**
  - 전체 가입자 수
  - 신규 가입자 (오늘/이번 주/이번 달)
- **총 강의 수**
  - 공개된 강의 수
- **총 매출**
  - 전체 매출 (누적)
  - 오늘/이번 주/이번 달 매출
- **총 구매 건수**
  - 전체 구매 건수
  - 오늘/이번 주/이번 달 구매 건수

**최근 활동**
- 최근 가입한 회원 (5명)
- 최근 결제 내역 (5건)
- 최근 문의 (5건)

**인기 강의 TOP 5**
- 구매 수 기준 상위 5개 강의
- 각 강의별 구매 수, 매출

**차트 (선택적)**
- 일별/주별/월별 매출 그래프
- 일별/주별/월별 가입자 수 그래프

**H-5-2. 매출 통계**

**기간별 매출**
- 날짜 범위 선택 (시작일 ~ 종료일)
- 해당 기간 총 매출
- 일별/주별/월별 매출 그래프

**강의별 매출**
- 각 강의별 총 매출
- 구매 건수
- 평균 판매 가격

**결제 수단별 매출**
- 카드 결제 매출
- 무통장입금 매출
- 비율 (파이 차트 - 선택적)

**환불률**
- 전체 구매 건수 대비 환불 건수
- 환불 금액

**H-5-3. 수강 통계**

**강의별 수강 인원**
- 각 강의별 수강 중인 인원
- 수강 완료 인원 (진도율 100%)

**평균 진도율**
- 전체 수강생의 평균 진도율
- 강의별 평균 진도율

**수강 완료율**
- 수강 완료 인원 / 전체 수강 인원

**강의별 평균 시청 시간**
- 각 강의별 평균 시청 시간 (선택적)
- Vimeo Analytics API 활용 (선택적)

**학습 활동**
- 일별/주별 활성 사용자 수 (DAU/WAU)
- 일별/주별 영상 재생 횟수

---

## 5. 우선순위 및 Phase 구분

### Phase 1: 기본 인프라 (1-2주)

**작업 내용**
- Next.js 15 프로젝트 초기 설정
- TypeScript, TailwindCSS 설정
- Prisma 설정 및 Supabase 연동
- 데이터베이스 스키마 설계 및 마이그레이션
- NextAuth.js v5 설정
  - Credentials Provider (일반 로그인)
  - Google Provider
  - Kakao Provider
  - Naver Provider
- Prisma Adapter 설정
- 기본 레이아웃 및 네비게이션 구성
- 회원가입/로그인 페이지 구현
- 환경 변수 설정

**주요 deliverable**
- 4가지 방식의 로그인 기능 동작
- 사용자 DB 스키마 완성
- 기본 UI/레이아웃

### Phase 2: 핵심 강의 기능 (3-4주)

**작업 내용**
- 강의 목록 페이지 구현
  - 강의 카드 UI
  - 검색 기능
- 강의 상세 페이지 구현
  - 강의 정보 표시
  - 영상 목록 표시
  - 미리보기 영상 Vimeo 플레이어 임베드
  - 구매 버튼
- 강의 수강 페이지 구현 (기본)
  - Vimeo Player SDK 연동
  - 영상 재생 기능
  - 영상 목록 (사이드바)
  - 영상 전환 기능
- 미리보기 영상 기능
- 관리자 페이지: 강의 관리
  - 강의 CRUD
  - 영상 관리 (Vimeo URL 연동)
  - 영상 순서 관리
  - 미리보기 영상 지정
  - 강의 자료 업로드/삭제

**주요 deliverable**
- 사용자: 강의 목록 조회, 상세 조회, 미리보기 시청
- 관리자: 강의 생성/수정, 영상 추가/관리
- Vimeo 연동 완료

### Phase 3: 결제 시스템 (2-3주)

**작업 내용**
- 토스페이먼츠 연동
  - 카드 결제 구현
  - 결제 페이지 UI
  - 결제 성공/실패 처리
  - Webhook 처리 (선택적)
- 무통장입금 기능
  - 입금 정보 입력 폼
  - 입금 대기 상태 생성
- 결제 완료 후 수강 등록 처리
- 관리자: 무통장입금 승인/거절
- 구매 내역 조회 (마이페이지)
- 영수증 발급
  - 영수증 생성 로직
  - PDF 생성 (선택적 - react-pdf 등)
  - 영수증 조회/출력
- 기본 환불 처리
  - 환불 신청 UI
  - 관리자 환불 승인/거절
  - 토스페이먼츠 결제 취소 API 연동

**주요 deliverable**
- 카드 결제 및 무통장입금 기능 동작
- 결제 후 강의 수강 가능
- 영수증 발급
- 환불 기본 기능

### Phase 4: 진도율 및 학습 관리 (1-2주)

**작업 내용**
- 진도율 시스템 구현
  - Vimeo Player API로 재생 시간 추적
  - 재생 위치 주기적으로 저장
  - 80% 이상 시청 시 완료 처리
  - 전체 진도율 계산
- 이어보기 기능
  - 마지막 시청 위치 저장
  - 이어보기 옵션 제공
- 내 강의실 구현
  - 수강 중인 강의 목록
  - 진도율 표시
  - 최근 학습 이력
- 강의 자료 업로드/다운로드
  - 관리자: 파일 업로드
  - 사용자: 파일 다운로드 (구매자만)
  - Supabase Storage 연동

**주요 deliverable**
- 진도율 추적 및 표시
- 이어보기 기능
- 내 강의실 완성
- 강의 자료 다운로드

### Phase 5: 부가 기능 (2-3주)

**작업 내용**
- 등록기기 관리
  - 기기 Fingerprinting (FingerprintJS 또는 유사 라이브러리)
  - 최대 2개 기기 제한
  - 기기 자동 등록
  - 초과 시 접근 차단
  - 마이페이지: 기기 목록 조회, 해제
  - 관리자: 기기 조회, 강제 해제
- 공지사항
  - 목록/상세 페이지
  - 관리자: 작성/수정/삭제
  - 중요 공지 상단 고정
  - 첨부파일 업로드/다운로드
- 1:1 문의
  - Tiptap 리치 텍스트 에디터 설정
  - 이미지 업로드 (Supabase Storage)
  - 사용자: 문의 작성/목록/상세
  - 관리자: 전체 문의 조회, 답변 작성
  - 비밀글 기능
- 세금계산서 발급
  - 사용자: 세금계산서 발급 요청
  - 사업자 정보 입력
  - 관리자: 발급 요청 조회, 발행 처리

**주요 deliverable**
- 등록기기 관리 완료
- 공지사항 기능
- 1:1 문의 기능 (리치 텍스트)
- 세금계산서 발급

### Phase 6: 관리자 고도화 (2주)

**작업 내용**
- 회원 관리
  - 회원 목록/상세
  - 검색/필터링
  - 수강 현황 조회
  - 등록기기 조회
  - 회원 상태 변경 (정지/해제/삭제)
- 결제 관리 강화
  - 전체 결제 내역 조회
  - 필터링/정렬
  - 무통장입금 관리 UI 개선
  - 환불 관리 UI 개선
- 통계/리포트 대시보드
  - 대시보드 메인 페이지
  - 개요 카드 (회원 수, 매출, 구매 건수)
  - 최근 활동
  - 인기 강의 TOP 5
- 매출 통계
  - 기간별 매출 그래프
  - 강의별 매출
  - 결제 수단별 매출
- 수강 통계
  - 강의별 수강 인원
  - 평균 진도율
  - 수강 완료율

**주요 deliverable**
- 관리자 페이지 완성
- 회원 관리 기능
- 결제 관리 강화
- 통계 대시보드

### Phase 7: 최적화 및 배포 (1-2주)

**작업 내용**
- 성능 최적화
  - 이미지 최적화 (Next.js Image 컴포넌트)
  - 코드 스플리팅 (Dynamic Import)
  - 캐싱 전략 (SWR, React Query - 선택적)
  - 데이터베이스 쿼리 최적화 (인덱싱)
  - Lighthouse 성능 측정 및 개선
- SEO 최적화
  - 메타 태그 설정 (title, description, og 태그)
  - sitemap.xml 생성
  - robots.txt 설정
  - 구조화된 데이터 (JSON-LD - 선택적)
- 반응형 디자인 완성
  - 모바일/태블릿/데스크톱 테스트
  - UI/UX 개선
- 크로스 브라우저 테스트
  - Chrome, Safari, Firefox, Edge 테스트
- 에러 핸들링 및 로깅
  - 에러 바운더리
  - 로깅 시스템 (선택적 - Sentry)
- 배포
  - Vercel 배포 설정
  - 환경 변수 설정 (Production)
  - 도메인 연결
  - HTTPS 설정
- 최종 테스트
  - 전체 기능 통합 테스트
  - 사용자 시나리오 테스트

**주요 deliverable**
- 최적화된 성능
- SEO 최적화 완료
- 배포 완료 (Production)
- 안정적인 서비스 운영

### 총 예상 기간
**12주 ~ 18주 (약 3개월 ~ 4.5개월)**

---

## 6. 데이터 모델 개요

### 주요 테이블

#### NextAuth.js 관련 (Prisma Adapter 자동 생성)
- **User**: 사용자 정보
- **Account**: 소셜 로그인 계정 정보 (Google, Kakao, Naver)
- **Session**: 세션 정보 (DB Session 사용 시)
- **VerificationToken**: 이메일 인증 토큰

#### 강의 관련
- **Course**: 강의 정보
  - id, title, description, price, thumbnailUrl, instructorName, instructorIntro, isPublished, createdAt, updatedAt
- **Video**: 영상 정보
  - id, courseId, vimeoUrl, title, description, duration, order, isPreview, createdAt, updatedAt
- **CourseFile**: 강의 자료
  - id, courseId, fileName, fileUrl, fileSize, createdAt

#### 결제 관련
- **Purchase**: 구매 정보
  - id, userId, courseId, amount, status (completed, pending, canceled, refunded), createdAt
- **Payment**: 결제 정보
  - id, purchaseId, paymentKey (토스페이먼츠), orderId, method (card, bank_transfer), status, paidAt, createdAt
- **BankTransfer**: 무통장입금 정보 (Payment 확장)
  - id, paymentId, depositorName, expectedDepositDate, approvedAt, rejectedAt, rejectReason
- **Receipt**: 영수증
  - id, purchaseId, receiptNumber, issuedAt
- **TaxInvoice**: 세금계산서
  - id, purchaseId, businessNumber, companyName, ceoName, address, businessType, businessCategory, email, issuedAt, status (requested, issued)
- **Refund**: 환불 정보
  - id, purchaseId, reason, requestedAt, status (pending, approved, rejected, completed), processedAt, refundAmount

#### 수강 관련
- **Enrollment**: 수강 등록
  - id, userId, courseId, enrolledAt
- **Progress**: 진도율 (영상별)
  - id, userId, videoId, lastPosition (초 단위), isCompleted, completedAt, updatedAt

#### 기기 관리
- **Device**: 등록 기기
  - id, userId, deviceId (Fingerprint), deviceName, userAgent, ipAddress, lastAccessedAt, createdAt

#### 커뮤니티
- **Notice**: 공지사항
  - id, title, content, isPinned (중요 공지), views, attachmentUrl, createdAt, updatedAt

#### 고객센터
- **Inquiry**: 1:1 문의
  - id, userId, title, content (Rich Text), isPrivate, status (pending, answered), createdAt
- **InquiryReply**: 문의 답변
  - id, inquiryId, adminId (User), content (Rich Text), createdAt, updatedAt

#### 관리자
- **Role**: 역할 (선택적 - User 테이블에 role 필드로 대체 가능)
  - User 테이블에 role 필드 추가 (STUDENT, ADMIN)

### ERD 개념도 (텍스트)

```
User (1) --- (N) Account (소셜 로그인)
User (1) --- (N) Purchase
User (1) --- (N) Enrollment
User (1) --- (N) Progress
User (1) --- (N) Device
User (1) --- (N) Inquiry

Course (1) --- (N) Video
Course (1) --- (N) CourseFile
Course (1) --- (N) Purchase
Course (1) --- (N) Enrollment

Purchase (1) --- (1) Payment
Purchase (1) --- (1) Receipt (optional)
Purchase (1) --- (1) TaxInvoice (optional)
Purchase (1) --- (1) Refund (optional)

Payment (1) --- (1) BankTransfer (optional, if method = bank_transfer)

Enrollment (1) --- (1) User
Enrollment (1) --- (1) Course

Progress (N) --- (1) User
Progress (N) --- (1) Video

Inquiry (1) --- (N) InquiryReply
```

---

## 7. 주요 고려사항

### 7-1. 보안

**HTTPS**
- 모든 통신은 HTTPS로 암호화
- Vercel 자동 제공

**환경 변수 관리**
- API 키, DB 연결 정보 등 환경 변수로 관리
- `.env` 파일 (로컬), Vercel 환경 변수 (Production)
- `.gitignore`에 `.env` 추가

**API 키 보호**
- 토스페이먼츠 시크릿 키, Vimeo Access Token 등 서버에서만 사용
- 클라이언트에 노출 금지

**SQL Injection 방지**
- Prisma ORM 사용으로 기본 방지
- Raw Query 사용 시 주의

**XSS (Cross-Site Scripting) 방지**
- 사용자 입력 검증 및 sanitize
- Rich Text 에디터 출력 시 DOMPurify 사용 (선택적)
- React는 기본적으로 XSS 방지 (dangerouslySetInnerHTML 사용 시 주의)

**CSRF (Cross-Site Request Forgery) 방지**
- NextAuth.js가 기본 제공
- API Routes에 CSRF 토큰 검증 (선택적)

**등록기기 검증 강화**
- Fingerprinting으로 기기 식별
- IP 주소 추가 검증 (선택적)
- 비정상적인 기기 등록 시도 차단

**비밀번호 암호화**
- bcrypt 또는 argon2 사용
- 비밀번호 평문 저장 금지

**권한 관리**
- 관리자 페이지 접근 제한 (Role 기반)
- API Routes에서 권한 검증
- Middleware 활용

**파일 업로드 보안**
- 파일 형식 검증 (MIME type)
- 파일 크기 제한
- 악성 파일 업로드 방지

### 7-2. 성능

**영상 CDN 활용**
- Vimeo CDN 자동 활용
- 영상 다운로드 방지로 대역폭 절약

**이미지 최적화**
- Next.js Image 컴포넌트 사용
- WebP, AVIF 포맷 지원
- Lazy Loading
- 적절한 이미지 크기 (responsive)

**페이지네이션 / 무한 스크롤**
- 강의 목록, 결제 내역 등 페이지네이션 적용
- 대량 데이터 로딩 방지

**데이터베이스 인덱싱**
- 자주 조회하는 필드에 인덱스 추가
  - User: email
  - Course: title, isPublished
  - Purchase: userId, courseId
  - Payment: paymentKey, orderId
  - Enrollment: userId, courseId
  - Progress: userId, videoId

**캐싱 전략**
- Static Generation (SSG) 활용 (강의 목록, 상세 페이지 - ISR)
- Server-Side Rendering (SSR) 최소화
- Client-side caching (SWR, React Query)
- Redis 캐싱 (선택적 - 고급)

**코드 스플리팅**
- Next.js 자동 코드 스플리팅
- Dynamic Import 활용 (무거운 컴포넌트)

**번들 크기 최적화**
- Tree Shaking
- 불필요한 라이브러리 제거
- Bundle Analyzer로 분석

### 7-3. 사용자 경험

**로딩 상태 표시**
- 로딩 스피너, 스켈레톤 UI
- 사용자가 대기 중임을 인지

**에러 핸들링 및 안내**
- 명확한 에러 메시지
- 사용자 친화적인 안내
- 에러 바운더리 (Error Boundary)

**반응형 디자인**
- 모바일 우선 (Mobile First)
- 태블릿, 데스크톱 대응
- 미디어 쿼리, Flexbox, Grid 활용

**접근성 (Accessibility)**
- 시맨틱 HTML
- ARIA 속성
- 키보드 네비게이션
- 스크린 리더 지원

**직관적인 UI/UX**
- 명확한 버튼 레이블
- 일관된 디자인 시스템
- 사용자 피드백 (성공/실패 메시지)

**알림 시스템 (선택적)**
- 결제 완료, 환불 승인 등 이메일 알림
- 사이트 내 알림 (Notification)

### 7-4. 법적/정책

**개인정보 처리방침**
- 수집하는 개인정보 명시
- 이용 목적, 보유 기간
- 제3자 제공 여부
- 개인정보 보호 책임자

**이용약관**
- 서비스 이용 조건
- 금지 행위
- 면책 조항
- 분쟁 해결

**환불 정책**
- 명확한 환불 기준
- 환불 절차 안내
- 사용자 동의 필수

**저작권 보호**
- 영상 다운로드 방지 (Vimeo 설정)
- 우클릭 방지 (선택적)
- 저작권 안내 문구

**전자금융거래법 준수**
- 결제 정보 보호
- 거래 기록 보관 (5년)

**청소년 보호**
- 연령 제한 안내 (필요 시)

**쿠키 정책 (선택적)**
- 쿠키 사용 안내
- 사용자 동의

---

## 8. 제외 기능

명확히 구현하지 않을 기능:

### 강의 시스템
- ❌ **수강후기/리뷰 시스템**
  - 평점, 별점, 텍스트 리뷰 등
- ❌ **강의 카테고리/태그**
  - 카테고리별 분류, 태그 검색
- ❌ **강의 필터링**
  - 가격 범위, 난이도, 평점 등 필터
- ❌ **섹션/챕터 구조**
  - 강의 > 섹션 > 레슨 계층 구조
  - 강의는 단순히 여러 영상의 나열

### 결제 시스템
- ❌ **장바구니**
  - 여러 강의를 한 번에 구매하는 기능 없음
  - 강의별 개별 구매만 지원
- ❌ **쿠폰/할인 시스템**
  - 쿠폰 코드, 프로모션, 할인율
- ❌ **포인트/마일리지**
  - 적립, 사용 기능

### 커뮤니티
- ❌ **수강후기** (앞서 언급)
- ❌ **Q&A 게시판** (강의별 질문)
  - 1:1 문의만 지원
- ❌ **학습 노트 공유**
- ❌ **커뮤니티 포럼**

### 학습 관리
- ❌ **퀴즈/시험**
  - 객관식, 주관식 문제
  - 자동 채점
- ❌ **수료증 발급**
  - 강의 완료 시 수료증 PDF 생성
  - 추후 고려 가능
- ❌ **학습 목표 설정**
  - 하루 목표, 주간 목표 등
- ❌ **학습 알림/리마인더**
  - 푸시 알림, 이메일 리마인더

### 소셜 기능
- ❌ **추천 알고리즘**
  - 강의 추천, 유사 강의
- ❌ **실시간 채팅**
  - 강사-학생 채팅
- ❌ **라이브 스트리밍**
  - 실시간 강의
- ❌ **학습 그룹/스터디**
  - 학습 커뮤니티, 스터디 그룹

### 기타
- ❌ **모바일 앱**
  - iOS/Android 네이티브 앱
  - PWA는 고려 가능
- ❌ **다국어 지원**
  - i18n (국제화)
- ❌ **다크 모드**
  - 추후 고려 가능
- ❌ **오프라인 모드**
  - 영상 다운로드 후 오프라인 시청

---

## 9. 추후 확장 가능성

현재 MVP에서 제외되었지만, 추후 고려할 수 있는 기능:

### Phase 8 이후 (선택적)
- **수강후기/리뷰 시스템**
  - 강의 품질 향상을 위한 피드백
- **퀴즈/시험 기능**
  - 학습 효과 측정
- **수료증 발급**
  - 강의 완료 시 인증
- **강의 카테고리/필터**
  - 강의 수가 많아질 경우 필요
- **쿠폰/할인 시스템**
  - 프로모션, 마케팅
- **학습 알림**
  - 이메일 리마인더, 푸시 알림
- **강의 미리보기 확대**
  - 더 많은 영상을 미리보기로 제공
- **모바일 앱 (PWA)**
  - Progressive Web App으로 모바일 경험 개선
- **다크 모드**
  - 사용자 선호도에 따라
- **라이브 Q&A**
  - 실시간 질의응답 (Zoom, Google Meet 연동)

---

## 10. 참고 링크 및 리소스

### 기술 스택 문서
- **Next.js**: https://nextjs.org/docs
- **NextAuth.js (Auth.js)**: https://authjs.dev
- **Prisma**: https://www.prisma.io/docs
- **Supabase**: https://supabase.com/docs
- **TailwindCSS**: https://tailwindcss.com/docs
- **Tiptap**: https://tiptap.dev
- **Vimeo API**: https://developer.vimeo.com
- **토스페이먼츠**: https://docs.tosspayments.com

### 라이브러리
- **React Hook Form**: https://react-hook-form.com
- **Zod**: https://zod.dev
- **FingerprintJS**: https://github.com/fingerprintjs/fingerprintjs
- **Shadcn/ui**: https://ui.shadcn.com

### 배포
- **Vercel**: https://vercel.com/docs

---

## 마무리

이 문서는 Private LMS 프로젝트의 전체 기능 명세를 담고 있습니다.

모든 요구사항이 명확히 정의되었으며, Phase별로 체계적으로 개발을 진행할 수 있습니다.

다음 단계:
1. `database-schema.md` 작성 - 상세 DB 스키마 설계
2. `wbs.md` 작성 - 작업 분류 및 일정 계획
3. 개발 착수

문의사항이나 수정 요청이 있으면 언제든지 피드백 주시기 바랍니다.
